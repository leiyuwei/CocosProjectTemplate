{"version":3,"sources":["Maybe.ts"],"names":[],"mappings":";;;;;AAEA;IAYI,eAAa,CAAW;QAAX,kBAAA,EAAA,QAAW;QAXhB,aAAQ,GAAY,IAAI,CAAC;QACzB,WAAM,GAAM,IAAI,CAAC;QAWrB,IAAI,CAAC,IAAI,IAAI,EAAE;YACX,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SACnB;aAAM;YACH,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACzB;IACL,CAAC;IAfM,UAAI,GAAX,UAAe,CAAI;QACf,OAAO,IAAI,KAAK,CAAI,CAAC,CAAC,CAAC;IAC3B,CAAC;IAEM,aAAO,GAAd;QACI,OAAO,IAAI,KAAK,EAAK,CAAC;IAC1B,CAAC;IAWD,sBAAI,sBAAG;aAAP;YACI,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;;;OAAA;IAED,sBAAI,wBAAK;aAAT;YACI,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;;;OAAA;IAED,sCAAsC;IACtC,mBAAG,GAAH,UAAO,IAAc;QACjB,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,OAAO,IAAI,KAAK,CAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;SACvC;aAAM;YACH,OAAO,IAAI,KAAK,EAAK,CAAC;SACzB;IACL,CAAC;IAEK,yBAAS,GAAf,UAAmB,IAAuB;;;;;;6BAClC,IAAI,CAAC,KAAK,EAAV,wBAAU;wBACF,qBAAM,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAA;;wBAAxB,CAAC,GAAG,SAAoB;wBAC5B,sBAAO,IAAI,KAAK,CAAI,CAAC,CAAC,EAAC;4BAEvB,sBAAO,IAAI,KAAK,EAAK,EAAC;;;;KAE7B;IAED,oBAAI,GAAJ,UAAK,CAAI;QACL,OAAO,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;IACxB,CAAC;IAED,sCAAsC;IACtC,oBAAI,GAAJ,UAAQ,IAAqB;QACzB,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACzB;aAAM;YACH,OAAO,IAAI,KAAK,EAAK,CAAC;SACzB;IACL,CAAC;IAED,yBAAS,GAAT,UAAW,CAAI;QACX,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACrC,CAAC;IAED,qBAAK,GAAL,UAAW,IAAkB,EAAE,EAAY;QACvC,IAAI,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC,KAAK,EAAE;YACxB,OAAO,IAAI,KAAK,CAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;SAC/C;aAAM;YACH,OAAO,IAAI,KAAK,EAAK,CAAC;SACzB;IACL,CAAC;IACL,YAAC;AAAD,CAvEA,AAuEC,IAAA;AAvEY,sBAAK","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\basic","sourcesContent":["import { Fn, Fn2 } from \"./Types\";\r\n\r\nexport class Maybe<T> {\r\n    private _isValid: boolean = null;\r\n    private _value: T = null;\r\n\r\n    static Just<T>(v: T) {\r\n        return new Maybe<T>(v);\r\n    }\r\n\r\n    static Nothing<T>() {\r\n        return new Maybe<T>();\r\n    }\r\n    \r\n    constructor (v: T = null) {\r\n        if (v != null) {\r\n            this._isValid = true;\r\n            this._value = v;\r\n        } else {\r\n            this._isValid = false;\r\n        }\r\n    }\r\n\r\n    get val() {\r\n        return this._value;\r\n    }\r\n\r\n    get valid() {\r\n        return this._isValid;\r\n    }\r\n\r\n    // Functor f => (a -> b) -> f a -> f b\r\n    map<U>(func: Fn<T, U>) : Maybe<U> {\r\n        if (this.valid) {\r\n            return new Maybe<U>(func(this.val));\r\n        } else {\r\n            return new Maybe<U>();\r\n        }\r\n    }\r\n\r\n    async asyncFmap<U>(func: Fn<T, Promise<U>>) {\r\n        if (this.valid) {\r\n            let u = await func(this.val)\r\n            return new Maybe<U>(u);\r\n        } else {\r\n            return new Maybe<U>();\r\n        }\r\n    }\r\n\r\n    pure(x: T): Maybe<T> {\r\n        return new Maybe(x);\r\n    }\r\n    \r\n    // Monad m => (a -> m b) -> m a -> m b\r\n    bind<U>(func: Fn<T, Maybe<U>>) : Maybe<U> {\r\n        if (this.valid) {\r\n            return func(this.val);\r\n        } else {\r\n            return new Maybe<U>();\r\n        }\r\n    }\r\n    \r\n    getOrElse (x: T): T {\r\n        return this.valid ? this.val : x;\r\n    }\r\n\r\n    lift2<U,V>(func: Fn2<T, U, V>, ou: Maybe<U>) : Maybe<V> {\r\n        if (this.valid && ou.valid) {\r\n            return new Maybe<V>(func(this.val, ou.val));\r\n        } else {\r\n            return new Maybe<V>();\r\n        }\r\n    }\r\n}"]}